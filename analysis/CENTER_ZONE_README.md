# üéØ –¶–µ–Ω—Ç—ä—Ä –ó–æ–Ω–∞ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±—â–æ –æ–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–µ–Ω–∞ –µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç –∑–∞ **—Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞** —Å —Ä–∞–¥–∏—É—Å –æ—Ç 2.5 –∫–º, –∫–æ—è—Ç–æ –¥–∞–≤–∞ –ø—Ä–µ–¥–∏–º—Å—Ç–≤–æ –Ω–∞ **CENTER_BUS** –ø—Ä–µ–≤–æ–∑–Ω–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞ –æ–±—Å–ª—É–∂–≤–∞–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ —Ç–∞–∑–∏ –∑–æ–Ω–∞.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### LocationConfig —Ä–∞–∑—à–∏—Ä–µ–Ω–∏—è

–í `config.py` —Å–∞ –¥–æ–±–∞–≤–µ–Ω–∏ –Ω–æ–≤–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ `LocationConfig`:

```python
@dataclass
class LocationConfig:
    depot_location: Tuple[float, float] = (42.695785029219415, 23.23165887245312)
    center_location: Tuple[float, float] = (42.69735652560932, 23.323809998750914)
    center_zone_radius_km: float = 2.5  # üÜï –†–∞–¥–∏—É—Å –Ω–∞ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞
    enable_center_zone_priority: bool = True  # üÜï –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏

- **`center_zone_radius_km`**: –†–∞–¥–∏—É—Å –Ω–∞ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞ –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∏ (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ: 2.5 –∫–º)
- **`enable_center_zone_priority`**: –î–∞–ª–∏ –¥–∞ —Å–µ –ø—Ä–∏–ª–∞–≥–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞ (–ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ: True)

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç

### 1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞

–í `warehouse_manager.py` —Å–∞ –¥–æ–±–∞–≤–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏:

```python
def calculate_distance_km(coord1: Optional[Tuple[float, float]], coord2: Tuple[float, float]) -> float:
    """–ò–∑—á–∏—Å–ª—è–≤–∞ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –º–µ–∂–¥—É –¥–≤–µ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∏"""

def is_in_center_zone(customer_coords: Optional[Tuple[float, float]], center_location: Tuple[float, float], radius_km: float) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç—ä—Ç –µ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞"""
```

### 2. –†–∞–∑—à–∏—Ä–µ–Ω–æ WarehouseAllocation

–î–æ–±–∞–≤–µ–Ω–æ –µ –ø–æ–ª–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞:

```python
@dataclass
class WarehouseAllocation:
    # ... —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏ –ø–æ–ª–µ—Ç–∞ ...
    center_zone_customers: Optional[List[Customer]] = None  # üÜï –ö–ª–∏–µ–Ω—Ç–∏ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞
```

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–∞–Ω–µ –≤ CVRP Solver

–í `cvrp_solver.py` –µ –¥–æ–±–∞–≤–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–∞–Ω–µ:

#### –ù–∞–º–∞–ª–µ–Ω–∞ –≥–ª–æ–±–∞ –∑–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–µ
- –ö–ª–∏–µ–Ω—Ç–∏—Ç–µ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞ –ø–æ–ª—É—á–∞–≤–∞—Ç **50% –Ω–∞–º–∞–ª–µ–Ω–∞ –≥–ª–æ–±–∞** –∑–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–µ
- –¢–æ–≤–∞ –≥–∏ –ø—Ä–∞–≤–∏ –ø–æ-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∏ –∑–∞ –≤–∫–ª—é—á–≤–∞–Ω–µ –≤ –º–∞—Ä—à—Ä—É—Ç–∏—Ç–µ

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞ CENTER_BUS
- CENTER_BUS –ø—Ä–µ–≤–æ–∑–Ω–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ–ª—É—á–∞–≤–∞—Ç **30% –Ω–∞–º–∞–ª–µ–Ω–∏ —Ä–∞–∑—Ö–æ–¥–∏** –∑–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞
- –¢–æ–≤–∞ –≥–∏ –ø—Ä–∞–≤–∏ –ø–æ-–ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–Ω–∏ –∑–∞ –æ–±—Å–ª—É–∂–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∑–∏ –∫–ª–∏–µ–Ω—Ç–∏

### 4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

#### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞
- –î–æ–±–∞–≤–µ–Ω –µ **—á–µ—Ä–≤–µ–Ω –∫—Ä—ä–≥** —Å —Ä–∞–¥–∏—É—Å 2.5 –∫–º –æ–∫–æ–ª–æ —Ü–µ–Ω—Ç—ä—Ä–∞
- –î–æ–±–∞–≤–µ–Ω –µ **–∑–≤–µ–∑–¥–µ–Ω –º–∞—Ä–∫–µ—Ä** –∑–∞ —Ü–µ–Ω—Ç—ä—Ä–∞
- –ö—Ä—ä–≥—ä—Ç –ø–æ–∫–∞–∑–≤–∞ –∑–æ–Ω–∞—Ç–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### Excel –æ—Ç—á–µ—Ç–∏
- –î–æ–±–∞–≤–µ–Ω–∞ –µ –∫–æ–ª–æ–Ω–∞ **"–í —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞"** –≤ –º–∞—Ä—à—Ä—É—Ç–Ω–∏—Ç–µ –æ—Ç—á–µ—Ç–∏
- –ü–æ–∫–∞–∑–≤–∞ "–î–ê" –∏–ª–∏ "–ù–ï" –∑–∞ –≤—Å–µ–∫–∏ –∫–ª–∏–µ–Ω—Ç

## –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ

### –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ

```python
from config import get_config

config = get_config()
config.locations.enable_center_zone_priority = True  # –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ
config.locations.center_zone_radius_km = 3.0  # –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ —Ä–∞–¥–∏—É—Å–∞
```

### –¢–µ—Å—Ç–≤–∞–Ω–µ

–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ `test_center_zone.py` –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ:

```bash
python test_center_zone.py
```

## –õ–æ–≥–∏–∫–∞ –Ω–∞ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–∞–Ω–µ—Ç–æ

### 1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –í—Å–∏—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–∏ —Å–µ –ø—Ä–æ–≤–µ—Ä—è–≤–∞—Ç –¥–∞–ª–∏ —Å–∞ –≤ —Ä–∞–¥–∏—É—Å –æ—Ç 2.5 –∫–º –æ—Ç —Ü–µ–Ω—Ç—ä—Ä–∞
- –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ Haversine —Ñ–æ—Ä–º—É–ª–∞ –∑–∞ —Ç–æ—á–Ω–æ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ—Ç–æ

### 2. –ù–∞–º–∞–ª–µ–Ω–∞ –≥–ª–æ–±–∞ –∑–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–µ
```
–ë–∞–∑–æ–≤–∞ –≥–ª–æ–±–∞ = (—Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ * 5000) + (–æ–±–µ–º / 100 * 50000)
–ì–ª–æ–±–∞ –∑–∞ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞ = –ë–∞–∑–æ–≤–∞ –≥–ª–æ–±–∞ * 0.5
```

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞ CENTER_BUS
```
–ë–∞–∑–æ–≤–∞ —Ü–µ–Ω–∞ = —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ –≤ –º–µ—Ç—Ä–∏
–¶–µ–Ω–∞ –∑–∞ CENTER_BUS = –ë–∞–∑–æ–≤–∞ —Ü–µ–Ω–∞ * 0.7 (–∑–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞)
```

## –ü—Ä–∏–º–µ—Ä–∏

### –ü—Ä–∏–º–µ—Ä 1: –ö–ª–∏–µ–Ω—Ç –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞
- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏**: (42.69735652560932, 23.323809998750914)
- **–†–∞–∑—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—ä—Ä–∞**: 0.0 –∫–º
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í –∑–æ–Ω–∞—Ç–∞
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–∏—Å–æ–∫ (–Ω–∞–º–∞–ª–µ–Ω–∞ –≥–ª–æ–±–∞ –∑–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–µ)

### –ü—Ä–∏–º–µ—Ä 2: –ö–ª–∏–µ–Ω—Ç –∏–∑–≤—ä–Ω —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞
- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏**: (42.70000000000000, 23.330000000000000)
- **–†–∞–∑—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—ä—Ä–∞**: 2.8 –∫–º
- **–°—Ç–∞—Ç—É—Å**: ‚ùå –ò–∑–≤—ä–Ω –∑–æ–Ω–∞—Ç–∞
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω

## –õ–æ–≥–æ–≤–µ

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞ –¥–µ—Ç–∞–π–ª–Ω–∏ –ª–æ–≥–æ–≤–µ:

```
üéØ –ù–∞–º–µ—Ä–µ–Ω–∏ 5 –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞ (—Ä–∞–¥–∏—É—Å 2.5 –∫–º)
üéØ –ü—Ä–∏–ª–∞–≥–∞–Ω–µ –Ω–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞: 5 –∫–ª–∏–µ–Ω—Ç–∞
üéØ –ö–ª–∏–µ–Ω—Ç '–ö–ª–∏–µ–Ω—Ç A' –µ –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞ - –Ω–∞–º–∞–ª–µ–Ω–∞ –≥–ª–æ–±–∞: 125000
üéØ –ü—Ä–∏–ª–∞–≥–∞–Ω–µ –Ω–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞ CENTER_BUS –≤ —Ü–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∏ –æ–ø—Ü–∏–∏

### –ü—ä–ª–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
@dataclass
class LocationConfig:
    depot_location: Tuple[float, float] = (42.695785029219415, 23.23165887245312)
    center_location: Tuple[float, float] = (42.69735652560932, 23.323809998750914)
    center_zone_radius_km: float = 2.5
    enable_center_zone_priority: bool = True
```

### –î–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ

```python
config.locations.enable_center_zone_priority = False
```

### –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ —Ä–∞–¥–∏—É—Å–∞

```python
config.locations.center_zone_radius_km = 3.0  # 3 –∫–º –≤–º–µ—Å—Ç–æ 2.5 –∫–º
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç—ä–º –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ—Ç–æ

```python
def calculate_distance_km(coord1, coord2):
    lat1, lon1 = math.radians(coord1[0]), math.radians(coord1[1])
    lat2, lon2 = math.radians(coord2[0]), math.radians(coord2[1])
    
    dlat = lat2 - lat1
    dlon = lon2 - lon1
    
    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) * math.sin(dlon/2)**2
    c = 2 * math.asin(math.sqrt(a))
    
    return 6371 * c  # 6371 km –µ —Ä–∞–¥–∏—É—Å—ä—Ç –Ω–∞ –ó–µ–º—è—Ç–∞
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OR-Tools

1. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ CENTER_BUS –ø—Ä–µ–≤–æ–∑–Ω–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞**
2. **–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–µ–Ω callback –∑–∞ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–∞–Ω–µ**
3. **–ü—Ä–∏–ª–∞–≥–∞–Ω–µ –Ω–∞ –Ω–∞–º–∞–ª–µ–Ω–∏ —Ä–∞–∑—Ö–æ–¥–∏ –∑–∞ CENTER_BUS**
4. **–ù–∞–º–∞–ª—è–≤–∞–Ω–µ –Ω–∞ –≥–ª–æ–±–∞—Ç–∞ –∑–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ –∑–æ–Ω–∞—Ç–∞**

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¶–µ–Ω—Ç—ä—Ä –∑–æ–Ω–∞—Ç–∞ –æ—Å–∏–≥—É—Ä—è–≤–∞ –∏–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ, –∫–∞—Ç–æ –¥–∞–≤–∞ –ø—Ä–µ–¥–∏–º—Å—Ç–≤–æ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—Ç–µ CENTER_BUS –ø—Ä–µ–≤–æ–∑–Ω–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞ –æ–±—Å–ª—É–∂–≤–∞–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–Ω–∞—Ç–∞ –≥—Ä–∞–¥—Å–∫–∞ —á–∞—Å—Ç. –¢–æ–≤–∞ –ø–æ–¥–æ–±—Ä—è–≤–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—Ç–∞ –∏ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ —É—Å–ª—É–≥–∞—Ç–∞.